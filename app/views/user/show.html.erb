<script>
$(function() {
    <% if user_signed_in? %>
        <% if current_user.following?(@user) %>
        $('#no' + <%= @user.id %> + ' .btnFollow').addClass('btn-info');
        <% end %>

        $(document).on('click', '.btnFollow', function(e) {
            e.preventDefault();
            if($(this).hasClass('btn-info')) {
                $('#no' + <%= @user.id.to_s %>).attr('action', '/follow/delete');
                $('#no' + <%= @user.id.to_s %>).submit();
            } else {
                $('#no' + <%= @user.id.to_s %>).attr('action', '/follow/create');
                $('#no' + <%= @user.id.to_s %>).submit();
            }
        });
    <% end %>
});
</script>
<h1>User#show</h1>
<p>Find me in app/views/user/show.html.erb</p>

<h2>ユーザー情報</h2>
メールアドレス: <%= @user.email %>
<h2>ふせん</h2>
<% if user_signed_in? %>
    <%= form_tag({:controller => 'follow', :action => 'create'}, :remote => true, :class => 'form-ajax', :id => 'no' + @user.id.to_s) do %>
    <%= hidden_field_tag :user, @user.id %>
    <%= link_to 'follow', '#', :class => 'btn btn--s btn-no-padding btnFollow' %>
    <% end %>
<% end %>
<div id="bookmark">
	<%= render partial: 'user/bookmark', locals: { bookmarks: @user.bookmarks } %>
</div>
